<!doctype html>
<html>
	<head>
        <meta charset="UTF-8">
        <title>textControl</title>
		<script src="js/textControl.js"></script>


	</head>
	<body>
        <textarea id = "inputText" type="text" placeholder="输入字符"></textarea>
		<canvas id="myCanvas" width="1000px" height="600px">

		</canvas>

	</body>
    <script type="text/javascript">
        window.onload = function () {
            var input = document.getElementById("inputText");
            var canvas = document.getElementById("myCanvas");
            var context = canvas.getContext("2d");
            var text;
            input.onkeyup = function () {
                text = new textControl(canvas,this.value,canvas.width/2,canvas.height/2,0);
                context.clearRect(0,0,canvas.width,canvas.height);
                text.drawAll();
            };
            canvas.onmousemove = function (e) {
                if(text) {
                    var loc = windowToCanvas(canvas, e.clientX, e.clientY);
                    /*尼玛，isPointInPath太牛逼了，不需要经过坐标转换
                    loc = {
                        x:loc.x - canvas.width/2,
                        y:loc.y - canvas.height/2
                    };
                    */
                    text.funcImages.forEach(function (funcImg) {
                        context.save();
                        context.translate(canvas.width/2,canvas.height/2);
                        context.rotate(0);
                        if (funcImg.isInPath(loc.x, loc.y)) {
                            alert("in");
                        }
                        context.restore();
                    });

                }
            }
        }
    </script>
</html>
